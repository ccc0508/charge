<!--pages/trend/trend.wxml-->

<view class="stats-header">
  <text class="stats-title">æ”¶æ”¯è¶‹åŠ¿</text>
  <view class="month-selector">
    <view class="nav-arrow" bindtap="prevYear">â€¹</view>
    <text class="nav-title">{{currentYear}}å¹´</text>
    <view class="nav-arrow" bindtap="nextYear">â€º</view>
  </view>
</view>

<view class="section-card" wx:if="{{hasYearlyData}}">
  <!-- å›¾ä¾‹ -->
  <view class="bar-legend">
    <view class="bar-legend-item">
      <view class="bar-legend-dot" style="background: #e74c3c;"></view>
      <text class="bar-legend-text">æ”¯å‡º</text>
    </view>
    <view class="bar-legend-item">
      <view class="bar-legend-dot" style="background: #2ecc71;"></view>
      <text class="bar-legend-text">æ”¶å…¥</text>
    </view>
  </view>

  <!-- æŸ±å½¢å›¾ -->
  <scroll-view class="bar-scroll" scroll-x="{{true}}" enhanced="{{true}}" show-scrollbar="{{false}}">
    <view class="bar-canvas-inner">
      <canvas id="yearlyBarCanvas" type="2d" class="bar-canvas"></canvas>
    </view>
  </scroll-view>

  <!-- å¹´åº¦æ±‡æ€» -->
  <view class="yearly-summary">
    <view class="yearly-summary-item">
      <text class="yearly-summary-label">å¹´åº¦æ”¶å…¥</text>
      <text class="yearly-summary-value income-color">Â¥{{yearlyTotalIncome}}</text>
    </view>
    <view class="yearly-summary-item">
      <text class="yearly-summary-label">å¹´åº¦æ”¯å‡º</text>
      <text class="yearly-summary-value expense-color">Â¥{{yearlyTotalExpense}}</text>
    </view>
    <view class="yearly-summary-item">
      <text class="yearly-summary-label">å¹´åº¦ç»“ä½™</text>
      <text class="yearly-summary-value" style="color: {{yearlyBalance >= 0 ? '#2ecc71' : '#e74c3c'}}">Â¥{{yearlyBalance}}</text>
    </view>
  </view>
</view>

<!-- ç©ºçŠ¶æ€ -->
<view wx:if="{{!hasYearlyData}}" class="empty-state">
  <text class="empty-icon">ðŸ“Š</text>
  <text class="empty-text">æœ¬å¹´æš‚æ— è®°å½•</text>
</view>

<view style="height: 60rpx;"></view>
