<!--pages/rank/rank.wxml-->

<view class="stats-header">
  <text class="stats-title">æ’è¡Œæ¦œ</text>
  <view class="month-selector">
    <view class="nav-arrow" bindtap="prevMonth">â€¹</view>
    <text class="nav-title">{{currentMonth}}æœˆ</text>
    <view class="nav-arrow" bindtap="nextMonth">â€º</view>
  </view>
</view>

<!-- æ”¯å‡ºæ’è¡Œæ¦œ -->
<view class="section-card" wx:if="{{hasExpense}}">
  <view class="section-header">
    <text class="section-title">ğŸ”´ æ”¯å‡º TOP {{expenseRank.length}}</text>
  </view>
  <view class="rank-list">
    <view wx:for="{{expenseRank}}" wx:key="id" class="rank-item">
      <view class="rank-left">
        <view class="rank-medal {{item.rank <= 3 ? 'rank-top' : ''}}">{{item.rank === 1 ? 'ğŸ¥‡' : item.rank === 2 ? 'ğŸ¥ˆ' : item.rank === 3 ? 'ğŸ¥‰' : item.rank}}</view>
        <view class="rank-icon-wrap rank-icon-expense">
          <text class="rank-icon">{{item.categoryIcon}}</text>
        </view>
        <view class="rank-info">
          <text class="rank-label">{{item.categoryLabel}}</text>
          <text class="rank-note">{{item.note || item.date}}</text>
        </view>
      </view>
      <text class="rank-amount expense-color">{{item.amountText}}</text>
    </view>
  </view>
</view>

<!-- æ”¶å…¥æ’è¡Œæ¦œ -->
<view class="section-card" wx:if="{{hasIncome}}">
  <view class="section-header">
    <text class="section-title">ğŸŸ¢ æ”¶å…¥ TOP {{incomeRank.length}}</text>
  </view>
  <view class="rank-list">
    <view wx:for="{{incomeRank}}" wx:key="id" class="rank-item">
      <view class="rank-left">
        <view class="rank-medal {{item.rank <= 3 ? 'rank-top' : ''}}">{{item.rank === 1 ? 'ğŸ¥‡' : item.rank === 2 ? 'ğŸ¥ˆ' : item.rank === 3 ? 'ğŸ¥‰' : item.rank}}</view>
        <view class="rank-icon-wrap rank-icon-income">
          <text class="rank-icon">{{item.categoryIcon}}</text>
        </view>
        <view class="rank-info">
          <text class="rank-label">{{item.categoryLabel}}</text>
          <text class="rank-note">{{item.note || item.date}}</text>
        </view>
      </view>
      <text class="rank-amount income-color">{{item.amountText}}</text>
    </view>
  </view>
</view>

<!-- ç©ºçŠ¶æ€ -->
<view wx:if="{{!hasExpense && !hasIncome}}" class="empty-state">
  <text class="empty-icon">ğŸ†</text>
  <text class="empty-text">æœ¬æœˆæš‚æ— è®°å½•</text>
</view>

<view style="height: 60rpx;"></view>
